<launch>
    <arg name="world_file" default="$(find robot_depth_estimation)/worlds/small_city.world"/>
    <arg name="urdf_file" default="$(find robot_depth_estimation)/models/robot.urdf"/>
    <env name="GAZEBO_MODEL_PATH" value="$(find robot_depth_estimation)/models:$(optenv GAZEBO_MODEL_PATH)"/>
    <env name="GAZEBO_RESOURCE_PATH" value="$(find robot_depth_estimation)/worlds:$(optenv GAZEBO_RESOURCE_PATH)"/>

    <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" output="screen"/>


    <param name="robot_description" command="cat $(arg urdf_file)" />

    <param name="robot_depth_estimation" command="$(find xacro)/xacro $(arg urdf_file)" />

    <node name="gazebo" pkg="gazebo_ros" type="gazebo" args="-s libgazebo_ros_factory.so" respawn="false" output="screen"/>

    <node name="spawn_urdf" pkg="gazebo_ros" type="spawn_model" args="-param robot_depth_estimation -urdf -model two_wheel_robot" respawn="false" output="screen"/>

    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find robot_depth_estimation)/cfg/rviz.rviz" required="true" />
</launch>
